
# HG changeset patch
# User Magnus Melin <mkmelin+mozilla@iki.fi>
# Date 1768557119 -7200
# Node ID 44cb8d6c98099530ccd930c6b748fe8cf4dc4182
# Parent  2720d972b1242e22b3170a9c3c7098c15198a557
Bug 2007818 - Cancelling attachment reminder doesn't return focus to message body. r=arschmitz

Differential Revision: https://phabricator.services.mozilla.com/D278639

diff --git a/mail/components/compose/content/MsgComposeCommands.js b/mail/components/compose/content/MsgComposeCommands.js
--- a/mail/components/compose/content/MsgComposeCommands.js
+++ b/mail/components/compose/content/MsgComposeCommands.js
@@ -3470,16 +3470,21 @@ function manageAttachmentNotification(fo
         priority: gComposeNotification.PRIORITY_WARNING_MEDIUM,
       },
       [addButton]
     )
     .then(notification2 => {
       notification2.setAttribute("id", "attachmentNotificationBox");
       notification2.messageText.appendChild(msg);
       notification2.buttonContainer.appendChild(remindButton);
+      notification2.shadowRoot
+        .querySelector(".close")
+        .addEventListener("click", () => {
+          focusMsgBody();
+        });
     }, console.warn);
 }
 
 function clearRecipPillKeyIssues() {
   for (const pill of document.querySelectorAll("mail-address-pill.key-issue")) {
     pill.classList.remove("key-issue");
   }
 }

