
# HG changeset patch
# User welpy-cw <h.w.forms@arcor.de>
# Date 1764670656 -7200
# Node ID 78cb1e2e865c53a66126810963de1ea3d1924e28
# Parent  09c990f5084ecb3452c699b1ad5ef23acd2af7be
Bug 2003145 - Clear displayed URL in statusbar when location changes in mail window. r=mkmelin

Differential Revision: https://phabricator.services.mozilla.com/D274524

diff --git a/mail/base/content/mailWindow.js b/mail/base/content/mailWindow.js
--- a/mail/base/content/mailWindow.js
+++ b/mail/base/content/mailWindow.js
@@ -1115,20 +1115,24 @@ window.addEventListener("aboutMessageLoa
     if ((event.key == "Backspace" || event.key == "Delete") && event.repeat) {
       // Bail on delete event if there is a repeat event to prevent deleting
       // multiple messages by mistake from a longer key press.
       event.preventDefault();
     }
   });
 });
 
-// Listener to correctly set the busy flag on the webBrowser in about:3pane. All
-// other content tabs are handled by tabmail.js.
 contentProgress.addListener({
-  onStateChange(browser, webProgress, request, stateFlags, statusCode) {
+  onLocationChange() {
+    // Clear any URL for a hovered link that is displayed in the status bar.
+    window.MsgStatusFeedback.setOverLink("");
+  },
+  // Listener to correctly set the busy flag on the webBrowser in about:3pane. All
+  // other content tabs are handled by tabmail.js.
+  onStateChange(browser, _webProgress, _request, stateFlags, statusCode) {
     // Skip if this is not the webBrowser in about:3pane.
     if (browser.id != "webBrowser") {
       return;
     }
     let status;
     if (stateFlags & Ci.nsIWebProgressListener.STATE_IS_WINDOW) {
       if (stateFlags & Ci.nsIWebProgressListener.STATE_START) {
         status = "loading";

