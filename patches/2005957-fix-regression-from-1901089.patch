
# HG changeset patch
# User Richard Marti <richard.marti@gmail.com>
# Date 1765834771 0
# Node ID 1c503c5aa0f605b4368319799ff4b3d92b3ecb7a
# Parent  b56ef78dfb8e252d55de543094eff8735d4c20ef
Bug 2005957 - Remove the "disabled" attribute on datepicker when not disabled. r=mkmelin

Differential Revision: https://phabricator.services.mozilla.com/D276424

diff --git a/calendar/base/content/item-editing/calendar-item-iframe.js b/calendar/base/content/item-editing/calendar-item-iframe.js
--- a/calendar/base/content/item-editing/calendar-item-iframe.js
+++ b/calendar/base/content/item-editing/calendar-item-iframe.js
@@ -1287,17 +1287,21 @@ function updateDateCheckboxes(aDatePicke
 
   // force something to get set if there was nothing there before
   const datePicker = document.getElementById(aDatePickerId);
   // eslint-disable-next-line no-self-assign
   datePicker.value = datePicker.value; // FIXME: check if really needed
 
   // first of all disable the datetime picker if we don't have a date
   const hasDate = document.getElementById(aCheckboxId).checked;
-  datePicker.setAttribute("disabled", !hasDate);
+  if (!hasDate) {
+    datePicker.setAttribute("disabled", "true");
+  } else {
+    datePicker.removeAttribute("disabled");
+  }
 
   // create a new datetime object if date is now checked for the first time
   if (hasDate && !aDateTime.isValid()) {
     const date = cal.dtz.jsDateToDateTime(
       document.getElementById(aDatePickerId).value,
       cal.dtz.defaultTimezone
     );
     aDateTime.setDateTime(date);

