
# HG changeset patch
# User Magnus Melin <mkmelin+mozilla@iki.fi>
# Date 1761819144 0
# Node ID 153d0746a2408790e8ea627c7044fd3743108449
# Parent  66e495758c52d3a8088d178741ceb9a1e6c2a367
Bug 1995926 - import .vcard  - file picker should include both .vcf and .vcard. r=vineet

Differential Revision: https://phabricator.services.mozilla.com/D269712

diff --git a/mail/components/addrbook/test/browser/browser_import.js b/mail/components/addrbook/test/browser/browser_import.js
--- a/mail/components/addrbook/test/browser/browser_import.js
+++ b/mail/components/addrbook/test/browser/browser_import.js
@@ -338,17 +338,17 @@ add_task(async function testImportVCard(
 
   MockFilePicker.reset();
   MockFilePicker.setFiles([vCardFile]);
   listenForFilters();
   chooseFileType("vcard");
   EventUtils.synthesizeMouseAtCenter(nextButton, {}, importWin);
 
   const newBookPromise = TestUtils.topicObserved("addrbook-directory-created");
-  await doImport(".new", ["*.vcf", "*.*"], vCardFile.path);
+  await doImport(".new", ["*.vcf; *.vcard", "*.*"], vCardFile.path);
   const [newBook] = await newBookPromise;
   Assert.equal(
     newBook.dirName,
     "import",
     "the new book should be named after the file"
   );
   checkImported(newBook, false);
   await promiseDirectoryRemoved(newBook.URI);
diff --git a/mailnews/import/content/aboutImport.js b/mailnews/import/content/aboutImport.js
--- a/mailnews/import/content/aboutImport.js
+++ b/mailnews/import/content/aboutImport.js
@@ -773,17 +773,17 @@ class AddrBookImporterController extends
     filePicker.init(
       window.browsingContext,
       filePickerTitle,
       filePicker.modeOpen
     );
     const filter = {
       csv: "*.csv; *.tsv; *.tab",
       ldif: "*.ldif",
-      vcard: "*.vcf",
+      vcard: "*.vcf; *.vcard",
       sqlite: "*.sqlite",
       mab: "*.mab",
     }[this._fileType];
     if (filter) {
       filePicker.appendFilter("", filter);
     }
     filePicker.appendFilters(Ci.nsIFilePicker.filterAll);
     const rv = await new Promise(resolve => filePicker.open(resolve));

