
# HG changeset patch
# User welpy-cw <h.w.forms@arcor.de>
# Date 1756203397 -7200
# Node ID e27a3bec48c26e2a34ca696405f8cc5403c1ad95
# Parent  3e02b85663a4bb7b0ee86cc162e2586506756612
Bug 1984894 - Fix marking articles read after downloading headers with "Mark remaining headers as read" set. r=mkmelin

Differential Revision: https://phabricator.services.mozilla.com/D262255

diff --git a/mailnews/news/src/NntpNewsGroup.sys.mjs b/mailnews/news/src/NntpNewsGroup.sys.mjs
--- a/mailnews/news/src/NntpNewsGroup.sys.mjs
+++ b/mailnews/news/src/NntpNewsGroup.sys.mjs
@@ -388,14 +388,15 @@ export class NntpNewsGroup {
   }
 
   /**
    * Commit changes to msg db.
    */
   cleanUp() {
     if (this._commitReadKeySet) {
       this._folder.setReadSetFromStr(this._readKeySet);
+      this._commitReadKeySet = false;
     }
     this._folder.notifyFinishedDownloadinghdrs();
     this._db.commit(Ci.nsMsgDBCommitType.kSessionCommit);
     this._db.close(true);
   }
 }

