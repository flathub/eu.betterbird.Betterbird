
# HG changeset patch
# User Magnus Melin <mkmelin+mozilla@iki.fi>
# Date 1761648460 0
# Node ID b90bb9f675c53d6d40db01acae9591bda8913018
# Parent  2ed0167a97f01401e74a803aa86d339ea839c45b
Bug 1996650 - Fix crash in [@ LocalRenameOrReparentFolder]. r=babolivier

Differential Revision: https://phabricator.services.mozilla.com/D270233

diff --git a/mailnews/protocols/common/src/OfflineStorage.cpp b/mailnews/protocols/common/src/OfflineStorage.cpp
--- a/mailnews/protocols/common/src/OfflineStorage.cpp
+++ b/mailnews/protocols/common/src/OfflineStorage.cpp
@@ -176,16 +176,19 @@ static nsresult MoveFolderRecurse(nsIMsg
 
   return NS_OK;
 }
 
 nsresult LocalRenameOrReparentFolder(nsIMsgFolder* sourceFolder,
                                      nsIMsgFolder* newParentFolder,
                                      const nsACString& name,
                                      nsIMsgWindow* msgWindow) {
+  NS_ENSURE_ARG_POINTER(sourceFolder);
+  NS_ENSURE_ARG_POINTER(newParentFolder);
+
   nsAutoCString currentName;
   nsresult rv = sourceFolder->GetName(currentName);
   NS_ENSURE_SUCCESS(rv, rv);
 
   nsCOMPtr<nsIMsgFolder> currentParent;
   rv = sourceFolder->GetParent(getter_AddRefs(currentParent));
   NS_ENSURE_SUCCESS(rv, rv);
 

